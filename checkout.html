<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout - Jogo de Panelas Cerâmico 6 Peças</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-green: #22c55e;
      --primary-red: #dc2626;
      --bg-white: #ffffff;
      --text-dark: #1f2937;
      --text-label: #4b5563;
      --text-light: #9ca3af;
      --border-light: #e5e7eb;
      --bg-light: #f9fafb;
    }

    html, body {
      width: 100%;
      height: 100%;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: var(--bg-white);
      color: var(--text-dark);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Brand Banner */
    .brand-banner {
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      height: 240px;
      border-bottom: 1px solid var(--border-light);
      overflow: hidden;
      background-color: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .brand-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    @media (max-width: 768px) {
      .brand-banner {
        height: 180px;
      }
    }

    @media (max-width: 640px) {
      .brand-banner {
        height: 140px;
      }
    }

    /* Main Layout */
    main {
      padding: 2rem 0 2rem 0;
      min-height: calc(100vh - 240px);
    }

    .checkout-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .checkout-grid {
        grid-template-columns: 1.5fr 1fr;
      }
    }

    /* Form Section */
    .form-section {
      background-color: var(--bg-white);
      order: 2;
    }

    .section-title {
      font-family: 'Sora', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text-dark);
      border-bottom: 3px solid var(--primary-green);
      padding-bottom: 0.75rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    @media (min-width: 640px) {
      .form-row.two-cols {
        grid-template-columns: 1fr 1fr;
      }
      .form-row.three-cols {
        grid-template-columns: 1fr 1fr 1fr;
      }
    }

    label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--text-label);
    }

    label .required {
      color: var(--primary-red);
    }

    input, select {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border-light);
      border-radius: 0.375rem;
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s ease;
      background-color: var(--bg-white);
      color: var(--text-dark);
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary-green);
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
    }

    input::placeholder {
      color: var(--text-light);
    }

    input.error, select.error {
      border-color: var(--primary-red);
      background-color: rgba(239, 68, 68, 0.05);
    }

    .error-message {
      font-size: 0.75rem;
      color: var(--primary-red);
      margin-top: 0.25rem;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    /* Radio Button Styles */
    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .radio-option {
      display: flex;
      align-items: center;
      padding: 1rem 1.25rem;
      border: 2px solid var(--border-light);
      border-radius: 0.75rem;
      cursor: pointer;
      transition: all 0.25s ease;
      background: var(--bg-white);
      position: relative;
    }

    .radio-option:hover {
      border-color: var(--primary-green);
      background-color: rgba(34, 197, 94, 0.03);
    }

    /* Hide the real radio input */
    .radio-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* Custom radio circle */
    .radio-custom {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid #d1d5db;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.2s ease;
      margin-right: 1rem;
    }

    .radio-custom::after {
      content: '';
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--primary-green);
      opacity: 0;
      transform: scale(0);
      transition: all 0.2s ease;
    }

    .radio-option.selected .radio-custom {
      border-color: var(--primary-green);
    }

    .radio-option.selected .radio-custom::after {
      opacity: 1;
      transform: scale(1);
    }

    .radio-option.selected {
      border-color: var(--primary-green);
      background-color: rgba(34, 197, 94, 0.04);
    }

    .radio-label {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .payment-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }

    .payment-icon.pix-icon {
      background: #000000;
    }

    .payment-icon.card-icon {
      background: #3b82f6;
      color: white;
    }

    .radio-label-text {
      flex: 1;
    }

    .radio-label-text strong {
      display: block;
      color: var(--text-dark);
      font-weight: 600;
      font-size: 0.95rem;
    }

    .radio-label-text small {
      display: block;
      font-size: 0.78rem;
      color: var(--text-light);
      margin-top: 1px;
    }

    .payment-badge {
      padding: 0.25rem 0.65rem;
      border-radius: 1rem;
      font-size: 0.72rem;
      font-weight: 600;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .badge-green {
      background: rgba(34, 197, 94, 0.12);
      color: #16a34a;
    }

    .badge-blue {
      background: rgba(59, 130, 246, 0.12);
      color: #2563eb;
    }

    /* Footer security + payment logos */
    .checkout-footer {
      text-align: center;
      padding: 1.5rem 0 2rem;
      border-top: 1px solid var(--border-light);
      margin-top: 2rem;
    }

    .security-badges {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--text-light);
      font-size: 0.8rem;
    }

    .security-badge-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .security-badge-item i {
      font-size: 0.9rem;
    }

    .payment-logos-footer {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .pay-logo {
      height: 28px;
      width: auto;
      object-fit: contain;
      filter: grayscale(20%);
      opacity: 0.85;
    }

    .pay-logo-box {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 5px;
      padding: 4px 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 32px;
      min-width: 42px;
    }

    .footer-label {
      font-size: 0.78rem;
      color: var(--text-light);
      margin-bottom: 0.75rem;
    }

    /* Order Summary */
    .order-summary {
      background-color: var(--bg-white);
      padding: 1.5rem;
      border-radius: 0.75rem;
      border: 1px solid var(--border-light);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      order: 1;
    }

    @media (min-width: 768px) {
      .order-summary {
        position: sticky;
        top: 100px;
      }
    }

    .summary-title {
      font-family: 'Sora', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text-dark);
    }

    .product-image {
      width: 100%;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      overflow: hidden;
      background: #f9fafb;
    }

    .product-image img {
      width: 100%;
      height: 280px;
      display: block;
      object-fit: cover;
      object-position: center;
    }

    @media (max-width: 767px) {
      .product-image img {
        height: 220px;
      }
    }

    .product-info h3 {
      font-family: 'Sora', sans-serif;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.25rem;
    }

    .product-info p {
      font-size: 0.8rem;
      color: var(--text-label);
      line-height: 1.4;
    }

    .price-section {
      margin: 1rem 0;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-light);
    }

    .price-original {
      font-size: 0.85rem;
      color: var(--text-light);
      text-decoration: line-through;
      margin-bottom: 0.25rem;
    }

    .price-current {
      font-family: 'Sora', sans-serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary-green);
      margin-bottom: 0.5rem;
    }

    .discount-badge {
      display: inline-block;
      background-color: var(--primary-red);
      color: var(--bg-white);
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .summary-divider {
      margin: 1rem 0;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
      color: var(--text-label);
    }

    .summary-row.total {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-dark);
      border-top: 1px solid var(--border-light);
      padding-top: 1rem;
      margin-top: 1rem;
    }

    .total-price {
      color: var(--primary-green);
      font-family: 'Sora', sans-serif;
    }

    .installment-info {
      background-color: var(--bg-light);
      padding: 1rem;
      border-radius: 0.5rem;
      margin-top: 1rem;
      border-left: 3px solid var(--primary-green);
    }

    .installment-info p {
      font-size: 0.8rem;
      color: var(--text-label);
      margin-bottom: 0.25rem;
    }

    .installment-value {
      font-family: 'Sora', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      color: var(--primary-green);
    }

    .security-info {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      padding: 0.75rem;
      background-color: var(--bg-light);
      border-radius: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-label);
    }

    .security-info-icon {
      color: var(--primary-green);
      font-size: 1rem;
    }

    /* Buttons */
    .button-group {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 0;
    }

    button {
      padding: 1rem;
      border: none;
      border-radius: 0.5rem;
      font-size: 1rem;
      font-weight: 600;
      font-family: 'Sora', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-primary {
      background-color: var(--primary-green);
      color: var(--bg-white);
      width: 100%;
    }

    .btn-primary:hover:not(:disabled) {
      background-color: #16a34a;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }

    .btn-primary:active:not(:disabled) {
      transform: translateY(0);
    }

    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .btn-secondary {
      background-color: var(--bg-light);
      color: var(--text-dark);
      border: 1px solid var(--border-light);
    }

    .btn-secondary:hover {
      background-color: var(--border-light);
    }

    /* Loading State */
    .loading-spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: var(--bg-white);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 0.5rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Modal/Toast */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.55);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal-content {
      background-color: var(--bg-white);
      border-radius: 1rem;
      padding: 0;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 24px 40px rgba(0, 0, 0, 0.18);
      animation: slideUp 0.3s ease;
      overflow: hidden;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(2rem); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* Modal top banner (status bar) */
    .modal-banner {
      padding: 1.5rem 2rem 1.25rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .modal-banner.pending { background: linear-gradient(135deg, #fffbeb, #fef3c7); }
    .modal-banner.paid    { background: linear-gradient(135deg, #f0fdf4, #dcfce7); }
    .modal-banner.error-bg { background: linear-gradient(135deg, #fef2f2, #fee2e2); }

    .modal-icon-wrap {
      width: 3.25rem;
      height: 3.25rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      flex-shrink: 0;
    }

    .modal-icon-wrap.pending { background: #fbbf24; color: #fff; }
    .modal-icon-wrap.paid    { background: #22c55e; color: #fff; }
    .modal-icon-wrap.error   { background: #ef4444; color: #fff; }

    /* Spin animation for pending clock */
    @keyframes pulse-ring {
      0%   { box-shadow: 0 0 0 0 rgba(251,191,36,0.4); }
      70%  { box-shadow: 0 0 0 10px rgba(251,191,36,0); }
      100% { box-shadow: 0 0 0 0 rgba(251,191,36,0); }
    }
    .modal-icon-wrap.pending { animation: pulse-ring 2s infinite; }

    .modal-title {
      font-family: 'Sora', sans-serif;
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.15rem;
    }

    .modal-subtitle {
      font-size: 0.82rem;
      color: var(--text-label);
    }

    .modal-body {
      padding: 1.25rem 2rem 1.5rem;
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.4rem 0.9rem;
      border-radius: 2rem;
      font-size: 0.82rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .status-badge.pending { background: #fef3c7; color: #b45309; }
    .status-badge.paid    { background: #dcfce7; color: #15803d; }

    @keyframes spin-slow { to { transform: rotate(360deg); } }
    .spin { display: inline-block; animation: spin-slow 2s linear infinite; }

    .modal-message {
      color: var(--text-label);
      font-size: 0.88rem;
      line-height: 1.6;
      margin-bottom: 1.25rem;
    }

    .pix-section {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      padding: 1.25rem;
      text-align: center;
      margin-bottom: 1.25rem;
    }

    .pix-instruction {
      font-size: 0.8rem;
      color: var(--text-label);
      margin-bottom: 1rem;
    }

    .pix-qrcode {
      width: 200px;
      height: 200px;
      background-color: var(--bg-white);
      border: 2px solid var(--border-light);
      border-radius: 0.5rem;
      margin: 0 auto 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-size: 0.85rem;
    }

    .pix-code-label {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-bottom: 0.4rem;
      text-align: left;
    }

    .pix-code {
      background-color: var(--bg-white);
      padding: 0.65rem 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid var(--border-light);
      font-family: 'Courier New', monospace;
      font-size: 0.72rem;
      word-break: break-all;
      color: var(--text-dark);
      text-align: left;
    }

    .modal-footer {
      display: flex;
      gap: 0.75rem;
      padding: 0 2rem 1.5rem;
    }

    .modal-footer button { flex: 1; }

    .btn-ghost {
      background: transparent;
      color: var(--text-label);
      border: 1px solid var(--border-light);
      font-size: 0.88rem;
    }

    .btn-ghost:hover { background: var(--bg-light); }

    /* Error modal simple */
    .modal-icon {
      width: 3rem; height: 3rem;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.5rem;
      margin-right: 1rem;
    }
    .modal-icon.error { background: rgba(239,68,68,0.1); color: var(--primary-red); }
    .modal-header { display: flex; align-items: center; margin-bottom: 1rem; padding: 2rem 2rem 0; }
    .modal-header .modal-title { font-family: 'Sora', sans-serif; font-size: 1.15rem; font-weight: 700; color: var(--text-dark); }
    .error-modal-body { padding: 0 2rem; }
    .error-modal-body .modal-message { color: var(--text-label); line-height: 1.6; margin-bottom: 1.5rem; font-size: 0.9rem; }

    /* Responsive */
    @media (max-width: 767px) {
      .checkout-grid {
        grid-template-columns: 1fr;
      }

      main {
        padding: 2rem 0 8rem 0;
      }

      .section-title {
        font-size: 1.1rem;
      }

      .form-row {
        gap: 1rem;
      }

      .form-group {
        margin-bottom: 1rem;
      }
    }

    /* CEP loading */
    .cep-wrapper {
      position: relative;
    }

    .cep-spinner {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(34, 197, 94, 0.3);
      border-top-color: var(--primary-green);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      display: none;
    }

    .cep-spinner.show {
      display: block;
    }

    .cep-success {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary-green);
      font-size: 0.9rem;
      display: none;
    }

    .cep-success.show {
      display: block;
    }

    input.filled-by-cep {
      background-color: rgba(34, 197, 94, 0.04);
      border-color: rgba(34, 197, 94, 0.4);
      color: var(--text-dark);
    }

    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Print Styles */
    @media print {
      .brand-banner, .button-group, .modal-overlay {
        display: none;
      }
    }
  </style>
<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1433399025104876');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1433399025104876&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
<!-- UTMify -->
<script
  src="https://cdn.utmify.com.br/scripts/utms/latest.js"
  data-utmify-prevent-xcod-sck
  data-utmify-prevent-subids
  async
  defer
></script>
<!-- Back Redirect -->
<script>
  const link = 'https://principiaskin.com.br/backredirect.html';
  function setBackRedirect(url) {
    let urlBackRedirect = url;
    urlBackRedirect = urlBackRedirect.trim() +
      (urlBackRedirect.indexOf('?') > 0 ? '&' : '?') +
      document.location.search.replace('?', '').toString();
    history.pushState({}, '', location.href);
    history.pushState({}, '', location.href);
    history.pushState({}, '', location.href);
    window.addEventListener('popstate', () => {
      setTimeout(() => { location.href = urlBackRedirect; }, 1);
    });
  }
  setBackRedirect(link);
</script>
</head>
<body>
  <!-- Brand Banner -->
  <div class="brand-banner">
    <img src="https://files.manuscdn.com/user_upload_by_module/session_file/310419663029920067/lWaBDQxTpjAQLGWT.png" alt="Drogasil x Principia" />
  </div>

  <main>
    <div class="container">
      <div class="checkout-grid">
        <!-- Order Summary (Mobile First) -->
        <aside class="order-summary">
          <h2 class="summary-title">Resumo do Pedido</h2>

          <div class="product-image">
            <img src="panela1.jpg" alt="Jogo de Panelas Cerâmico 6 Peças" />
          </div>

          <div class="product-info">
            <h3>Jogo de Panelas Cerâmico 6 Peças</h3>
            <p>Gel de Limpeza GL-03 + Hidratante + Vitamina C + Protetor Solar</p>
          </div>

          <div class="price-section">
            <div class="price-original">R$ 229,60</div>
            <div class="price-current">R$ 149,90</div>
            <span class="discount-badge">57% OFF</span>
          </div>

          <div class="summary-divider"></div>

          <div class="summary-row">
            <span>Subtotal</span>
            <span>R$ 149,90</span>
          </div>
          <div class="summary-row">
            <span>Frete</span>
            <span>R$ 0,00</span>
          </div>
          <div class="summary-row total">
            <span>Total</span>
            <span class="total-price">R$ 149,90</span>
          </div>

          <div class="installment-info">
            <p>Parcelado em até 6x sem juros:</p>
            <div class="installment-value">6x de R$ 16,33</div>
          </div>

          <div class="security-info">
            <i class="fas fa-lock security-info-icon"></i>
            <span>Ambiente seguro</span>
          </div>
        </aside>

        <!-- Form Section -->
        <div class="form-section">
          <h1 class="section-title">Dados Pessoais</h1>
          <form id="checkoutForm">
            <!-- Nome Completo -->
            <div class="form-group">
              <label for="fullName">
                Nome Completo <span class="required">*</span>
              </label>
              <input
                type="text"
                id="fullName"
                name="fullName"
                placeholder="João Silva Santos"
                required
              />
              <div class="error-message" id="fullName-error"></div>
            </div>

            <!-- CPF -->
            <div class="form-group">
              <label for="cpf">
                CPF <span class="required">*</span>
              </label>
              <input
                type="text"
                id="cpf"
                name="cpf"
                placeholder="000.000.000-00"
                maxlength="14"
                required
              />
              <div class="error-message" id="cpf-error"></div>
            </div>

            <!-- Telefone -->
            <div class="form-group">
              <label for="phone">
                Telefone <span class="required">*</span>
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                placeholder="(00) 00000-0000"
                maxlength="15"
                required
              />
              <div class="error-message" id="phone-error"></div>
            </div>

            <!-- Endereço -->
            <h2 class="section-title" style="margin-top: 2rem;">Endereço de Entrega</h2>

            <!-- CEP -->
            <div class="form-group">
              <label for="cep">
                CEP <span class="required">*</span>
              </label>
              <div class="cep-wrapper">
                <input
                  type="text"
                  id="cep"
                  name="cep"
                  placeholder="00000-000"
                  maxlength="9"
                  required
                  style="padding-right: 2.5rem;"
                />
                <div class="cep-spinner" id="cepSpinner"></div>
                <i class="fas fa-check cep-success" id="cepCheck"></i>
              </div>
              <div class="error-message" id="cep-error"></div>
            </div>

            <!-- Logradouro -->
            <div class="form-group">
              <label for="street">
                Logradouro <span class="required">*</span>
              </label>
              <input
                type="text"
                id="street"
                name="street"
                placeholder="Rua, Avenida, Praça..."
                required
              />
              <div class="error-message" id="street-error"></div>
            </div>

            <!-- Número e Complemento -->
            <div class="form-row two-cols">
              <div class="form-group">
                <label for="number">
                  Número <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="number"
                  name="number"
                  placeholder="123"
                  required
                />
                <div class="error-message" id="number-error"></div>
              </div>
              <div class="form-group">
                <label for="complement">
                  Complemento (opcional)
                </label>
                <input
                  type="text"
                  id="complement"
                  name="complement"
                  placeholder="Apto 456, Bloco B..."
                />
              </div>
            </div>

            <!-- Bairro, Cidade, Estado -->
            <div class="form-row three-cols">
              <div class="form-group">
                <label for="neighborhood">
                  Bairro <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="neighborhood"
                  name="neighborhood"
                  placeholder="Bairro"
                  required
                />
                <div class="error-message" id="neighborhood-error"></div>
              </div>
              <div class="form-group">
                <label for="city">
                  Cidade <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="city"
                  name="city"
                  placeholder="São Paulo"
                  required
                />
                <div class="error-message" id="city-error"></div>
              </div>
              <div class="form-group">
                <label for="state">
                  Estado (UF) <span class="required">*</span>
                </label>
                <select id="state" name="state" required>
                  <option value="">Selecione</option>
                  <option value="AC">AC</option>
                  <option value="AL">AL</option>
                  <option value="AP">AP</option>
                  <option value="AM">AM</option>
                  <option value="BA">BA</option>
                  <option value="CE">CE</option>
                  <option value="DF">DF</option>
                  <option value="ES">ES</option>
                  <option value="GO">GO</option>
                  <option value="MA">MA</option>
                  <option value="MT">MT</option>
                  <option value="MS">MS</option>
                  <option value="MG">MG</option>
                  <option value="PA">PA</option>
                  <option value="PB">PB</option>
                  <option value="PR">PR</option>
                  <option value="PE">PE</option>
                  <option value="PI">PI</option>
                  <option value="RJ">RJ</option>
                  <option value="RN">RN</option>
                  <option value="RS">RS</option>
                  <option value="RO">RO</option>
                  <option value="RR">RR</option>
                  <option value="SC">SC</option>
                  <option value="SP">SP</option>
                  <option value="SE">SE</option>
                  <option value="TO">TO</option>
                </select>
                <div class="error-message" id="state-error"></div>
              </div>
            </div>

            <!-- Opções de Frete -->
            <h2 class="section-title" style="margin-top: 2rem;">Opções de Frete</h2>
            <div class="form-group">
              <div class="radio-group" id="freteGroup">
                <label class="radio-option selected">
                  <input type="radio" name="frete" value="gratis" checked />
                  <div class="radio-label">
                    <strong>Frete Grátis</strong>
                    <small>2 dias</small>
                  </div>
                  <span style="color: var(--primary-green); font-weight: 600;">Grátis</span>
                </label>
              </div>
              <div class="error-message" id="frete-error"></div>
            </div>

            <!-- Forma de Pagamento -->
            <h2 class="section-title" style="margin-top: 2rem;">Forma de Pagamento</h2>
            <div class="form-group">
              <div class="radio-group" id="pagamentoGroup">
                <label class="radio-option selected" id="opt-pix">
                  <input type="radio" name="pagamento" value="pix" checked />
                  <div class="radio-custom"></div>
                  <div class="radio-label">
                    <img src="pix.png" style="width:36px;height:36px;border-radius:50%;object-fit:cover;" alt="PIX" />
                    <div class="radio-label-text">
                      <strong>PIX</strong>
                      <small>Pagamento instantâneo</small>
                    </div>
                  </div>
                  <span class="payment-badge badge-green">Aprovação Instantânea</span>
                </label>

              </div>
              <div class="error-message" id="pagamento-error"></div>
            </div>

            <!-- Buttons -->
            <div class="button-group" style="margin-bottom: 0;">
              <button type="submit" class="btn-primary" id="submitBtn">
                Finalizar Pagamento
              </button>
            </div>

            <!-- Security info below button -->
            <div style="display:flex; justify-content:center; gap:1.5rem; margin-top:0.85rem; flex-wrap:wrap;">
              <div style="display:flex; align-items:center; gap:0.4rem; font-size:0.78rem; color:#6b7280;">
                <i class="fas fa-shield-alt" style="color:#22c55e;"></i>
                <span>Compra 100% Segura</span>
              </div>
              <div style="display:flex; align-items:center; gap:0.4rem; font-size:0.78rem; color:#6b7280;">
                <i class="fas fa-lock" style="color:#22c55e;"></i>
                <span>SSL Criptografado</span>
              </div>
            </div>
          </form>

          <!-- Payment logos footer -->
          <div class="checkout-footer">
            <p class="footer-label">Formas de pagamento</p>
            <div class="payment-logos-footer">
              <div class="pay-logo-box">
                <img src="pix.jpg" style="height:24px;width:24px;object-fit:contain;border-radius:4px;" alt="PIX" />
                <span style="font-family:Arial;font-size:11px;font-weight:700;color:#32BCAD;margin-left:4px;">PIX</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Success Modal -->
  <div class="modal-overlay" id="successModal">
    <div class="modal-content">

      <!-- Status Banner -->
      <div class="modal-banner pending" id="modalBanner">
        <div class="modal-icon-wrap pending" id="modalIconWrap">
          <i class="fas fa-clock" id="modalIcon"></i>
        </div>
        <div>
          <div class="modal-title" id="modalTitle">Pedido gerado com sucesso!</div>
          <div class="modal-subtitle" id="modalSubtitle">Aguardando confirmação do pagamento</div>
        </div>
      </div>

      <div class="modal-body">
        <!-- Status badge -->
        <div class="status-badge pending" id="statusBadge">
          <span class="spin" id="statusSpin"><i class="fas fa-circle-notch"></i></span>
          <span id="statusText">⏳ Aguardando pagamento</span>
        </div>

        <p class="modal-message" id="modalMessage">
          Aguardando pagamento via PIX. Assim que o pagamento for confirmado, você receberá um e-mail com os detalhes.
        </p>

        <!-- PIX Section -->
        <div class="pix-section" id="pixSection">
          <p class="pix-instruction">Escaneie o QR Code ou copie o código abaixo para realizar o pagamento via PIX.</p>
          <div class="pix-qrcode" id="pixQR">
            <span style="color:#9ca3af; font-size:0.85rem;">Carregando QR Code...</span>
          </div>
          <p class="pix-code-label">Código Copia e Cola:</p>
          <div class="pix-code" id="pixCode"></div>
          <button type="button" class="btn-secondary" onclick="copyPixCode()" style="width:100%; margin-top:0.85rem;">
            <i class="fas fa-copy"></i> Copiar Código PIX
          </button>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-ghost" id="alreadyPaidBtn">Já paguei</button>
        <button type="button" class="btn-primary" id="closeSuccessBtn">Voltar à loja</button>
      </div>
    </div>
  </div>

  <!-- Error Modal -->
  <div class="modal-overlay" id="errorModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon error"><i class="fas fa-times"></i></div>
        <div>
          <h2 class="modal-title">Erro no Processamento</h2>
        </div>
      </div>
      <div class="error-modal-body">
        <p class="modal-message" id="errorMessage">
          Ocorreu um erro ao processar sua compra. Por favor, tente novamente.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-secondary" id="closeErrorBtn">Fechar</button>
      </div>
    </div>
  </div>

  <script>

    // ============================================
    // META PIXEL EVENTS
    // ============================================

    // ViewContent — visitou o checkout
    fbq('track', 'ViewContent', {
      value: 149.90,
      currency: 'BRL',
      content_name: 'Jogo de Panelas Cerâmico 6 Peças',
      content_type: 'product'
    });

    // InitiateCheckout — primeiro campo preenchido
    let initiateCheckoutFired = false;
    document.querySelectorAll('#checkoutForm input, #checkoutForm select').forEach(el => {
      el.addEventListener('input', () => {
        if (!initiateCheckoutFired) {
          initiateCheckoutFired = true;
          fbq('track', 'InitiateCheckout', {
            value: 149.90,
            currency: 'BRL',
            content_name: 'Jogo de Panelas Cerâmico 6 Peças',
            content_type: 'product'
          });
        }
      }, { once: false });
    });

    // ============================================
    // RADIO BUTTON STYLING
    // ============================================

    document.querySelectorAll('.radio-group').forEach(group => {
      group.querySelectorAll('label.radio-option').forEach(label => {
        label.addEventListener('click', function() {
          group.querySelectorAll('label.radio-option').forEach(l => l.classList.remove('selected'));
          this.classList.add('selected');
          const radio = this.querySelector('input[type="radio"]');
          if (radio) radio.checked = true;
        });
      });
    });

    // ============================================
    // MASKS & FORMATTING
    // ============================================

    function maskCPF(value) {
      return value
        .replace(/\D/g, '')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d{1,2})$/, '$1-$2')
        .slice(0, 14);
    }

    function maskPhone(value) {
      return value
        .replace(/\D/g, '')
        .replace(/(\d{2})(\d)/, '($1) $2')
        .replace(/(\d{5})(\d)/, '$1-$2')
        .slice(0, 15);
    }

    function maskCEP(value) {
      return value
        .replace(/\D/g, '')
        .replace(/(\d{5})(\d)/, '$1-$2')
        .slice(0, 9);
    }

    // Apply masks on input
    document.getElementById('cpf').addEventListener('input', (e) => {
      e.target.value = maskCPF(e.target.value);
    });

    document.getElementById('phone').addEventListener('input', (e) => {
      e.target.value = maskPhone(e.target.value);
    });

    document.getElementById('cep').addEventListener('input', async (e) => {
      const masked = maskCEP(e.target.value);
      e.target.value = masked;

      const digits = masked.replace(/\D/g, '');
      if (digits.length === 8) {
        await fetchAddressByCEP(digits);
      }
    });

    async function fetchAddressByCEP(cep) {
      const spinner = document.getElementById('cepSpinner');
      const check = document.getElementById('cepCheck');
      const cepInput = document.getElementById('cep');

      spinner.classList.add('show');
      check.classList.remove('show');

      try {
        const res = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
        const data = await res.json();

        if (data.erro) {
          cepInput.classList.add('error');
          document.getElementById('cep-error').textContent = 'CEP não encontrado';
          document.getElementById('cep-error').classList.add('show');
          spinner.classList.remove('show');
          return;
        }

        // Preenche os campos
        const fields = {
          street: data.logradouro,
          neighborhood: data.bairro,
          city: data.localidade,
        };

        Object.entries(fields).forEach(([id, value]) => {
          const el = document.getElementById(id);
          if (value) {
            el.value = value;
            el.classList.add('filled-by-cep');
          }
        });

        // Seleciona o estado
        const stateSelect = document.getElementById('state');
        if (data.uf) {
          stateSelect.value = data.uf;
          stateSelect.classList.add('filled-by-cep');
        }

        // Foca no campo número
        document.getElementById('number').focus();

        // Remove erro e mostra check
        cepInput.classList.remove('error');
        document.getElementById('cep-error').classList.remove('show');
        check.classList.add('show');

      } catch (err) {
        console.error('Erro ao buscar CEP:', err);
      } finally {
        spinner.classList.remove('show');
      }
    }

    // ============================================
    // VALIDATION
    // ============================================

    function validateFullName(value) {
      if (!value.trim()) return 'Nome completo é obrigatório';
      if (value.trim().length < 3) return 'Nome deve ter pelo menos 3 caracteres';
      return '';
    }

    function validateCPF(value) {
      const cleaned = value.replace(/\D/g, '');
      if (!cleaned) return 'CPF é obrigatório';
      if (cleaned.length !== 11) return 'CPF deve ter 11 dígitos';
      if (/^(\d)\1{10}$/.test(cleaned)) return 'CPF inválido';
      return '';
    }

    function validatePhone(value) {
      const cleaned = value.replace(/\D/g, '');
      if (!cleaned) return 'Telefone é obrigatório';
      if (cleaned.length < 10) return 'Telefone inválido';
      return '';
    }

    function validateCEP(value) {
      const cleaned = value.replace(/\D/g, '');
      if (!cleaned) return 'CEP é obrigatório';
      if (cleaned.length !== 8) return 'CEP deve ter 8 dígitos';
      return '';
    }

    function validateStreet(value) {
      if (!value.trim()) return 'Logradouro é obrigatório';
      return '';
    }

    function validateNumber(value) {
      if (!value.trim()) return 'Número é obrigatório';
      return '';
    }

    function validateNeighborhood(value) {
      if (!value.trim()) return 'Bairro é obrigatório';
      return '';
    }

    function validateCity(value) {
      if (!value.trim()) return 'Cidade é obrigatória';
      return '';
    }

    function validateState(value) {
      if (!value) return 'Estado é obrigatório';
      return '';
    }

    // ============================================
    // FORM HANDLING
    // ============================================

    const form = document.getElementById('checkoutForm');
    const submitBtn = document.getElementById('submitBtn');
    const successModal = document.getElementById('successModal');
    const errorModal = document.getElementById('errorModal');
    const errorMessage = document.getElementById('errorMessage');

    function clearError(fieldName) {
      const input = document.getElementById(fieldName);
      const errorEl = document.getElementById(`${fieldName}-error`);
      if (input) input.classList.remove('error');
      if (errorEl) errorEl.classList.remove('show');
    }

    function showError(fieldName, message) {
      const input = document.getElementById(fieldName);
      const errorEl = document.getElementById(`${fieldName}-error`);
      if (input) input.classList.add('error');
      if (errorEl) {
        errorEl.textContent = message;
        errorEl.classList.add('show');
      }
    }

    function validateForm() {
      clearError('fullName');
      clearError('cpf');
      clearError('phone');
      clearError('cep');
      clearError('street');
      clearError('number');
      clearError('neighborhood');
      clearError('city');
      clearError('state');

      let isValid = true;

      const fullNameError = validateFullName(document.getElementById('fullName').value);
      if (fullNameError) {
        showError('fullName', fullNameError);
        isValid = false;
      }

      const cpfError = validateCPF(document.getElementById('cpf').value);
      if (cpfError) {
        showError('cpf', cpfError);
        isValid = false;
      }

      const phoneError = validatePhone(document.getElementById('phone').value);
      if (phoneError) {
        showError('phone', phoneError);
        isValid = false;
      }

      const cepError = validateCEP(document.getElementById('cep').value);
      if (cepError) {
        showError('cep', cepError);
        isValid = false;
      }

      const streetError = validateStreet(document.getElementById('street').value);
      if (streetError) {
        showError('street', streetError);
        isValid = false;
      }

      const numberError = validateNumber(document.getElementById('number').value);
      if (numberError) {
        showError('number', numberError);
        isValid = false;
      }

      const neighborhoodError = validateNeighborhood(document.getElementById('neighborhood').value);
      if (neighborhoodError) {
        showError('neighborhood', neighborhoodError);
        isValid = false;
      }

      const cityError = validateCity(document.getElementById('city').value);
      if (cityError) {
        showError('city', cityError);
        isValid = false;
      }

      const stateError = validateState(document.getElementById('state').value);
      if (stateError) {
        showError('state', stateError);
        isValid = false;
      }

      return isValid;
    }

    // ============================================
    // SIGILO PAY INTEGRATION
    // ============================================

    async function submitCheckout(e) {
      e.preventDefault();

      if (!validateForm()) {
        return;
      }

      // AddPaymentInfo — tentativa de pagamento
      fbq('track', 'AddPaymentInfo', {
        value: 149.90,
        currency: 'BRL',
        content_name: 'Jogo de Panelas Cerâmico 6 Peças',
        content_type: 'product'
      });

      submitBtn.disabled = true;
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span class="loading-spinner"></span>Processando...';

      try {
        const identifier = 'trans_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        const fullName = document.getElementById('fullName').value;
        const cpf = document.getElementById('cpf').value.replace(/\D/g, '');
        const phone = document.getElementById('phone').value.replace(/\D/g, '');
        const street = document.getElementById('street').value;
        const number = document.getElementById('number').value;
        const complement = document.getElementById('complement').value;
        const neighborhood = document.getElementById('neighborhood').value;
        const city = document.getElementById('city').value;
        const state = document.getElementById('state').value;
        const cep = document.getElementById('cep').value.replace(/\D/g, '');

        // Salva dados para correspondência avançada do Pixel (enquanto temos as variáveis no escopo)
        var nameParts = fullName.trim().toLowerCase().split(' ');
        sessionStorage.setItem('pxl_fn', nameParts[0] || '');
        sessionStorage.setItem('pxl_ln', nameParts.slice(1).join(' ') || '');
        sessionStorage.setItem('pxl_ph', '55' + phone);
        sessionStorage.setItem('pxl_zp', cep);
        sessionStorage.setItem('pxl_ct', city.toLowerCase().replace(/\s/g, ''));
        sessionStorage.setItem('pxl_st', state.toLowerCase());
        sessionStorage.setItem('pxl_country', 'br');

        const endereco = `${street}, ${number}${complement ? ' - ' + complement : ''} - ${neighborhood}, ${city} - ${state}, ${cep}`;

        const payload = {
          identifier: identifier,
          amount: 149.90,
          client: {
            name: fullName,
            email: 'ourokuto@gmail.com',
            phone: phone,
            document: cpf
          },
          products: [
            {
              id: 'kit-essencial-principia',
              name: 'Jogo de Panelas Cerâmico 6 Peças',
              quantity: 1,
              price: 149.90
            }
          ],
          callbackUrl: 'https://nwh-2.corusai.com/webhook/7316f4e2-3a2b-4f57-9629-f937a3ba3408',
          metadata: {
            endereco: endereco
          }
        };

        // Proxy via n8n para evitar CORS - o n8n adiciona as credenciais e chama a SigiloPay
        const response = await fetch('https://nwh-2.corusai.com/webhook/pix-checkout', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        if (!response.ok) {
          const errorData = await response.json().catch(() => ({}));
          throw new Error(errorData.message || `Erro ${response.status}`);
        }

        const raw = await response.json();
        console.log('API response:', raw);

        // A API retorna um array - pegamos o primeiro item
        const data = Array.isArray(raw) ? raw[0] : raw;

        if (data.status === 'OK' || data.status === 'PENDING' || data.pix) {
          // Preenche código copia e cola
          if (data.pix && data.pix.code) {
            document.getElementById('pixCode').textContent = data.pix.code;
          }

          // Preenche QR Code
          const pixQR = document.getElementById('pixQR');
          if (data.pix && (data.pix.base64 || data.pix.image)) {
            const src = data.pix.base64 || data.pix.image;
            const prefix = src.startsWith('data:') ? src : 'data:image/png;base64,' + src;
            pixQR.innerHTML = `<img src="${prefix}" alt="QR Code PIX" style="width:100%;height:100%;object-fit:contain;">`;
          } else {
            pixQR.innerHTML = '<span style="color:#9ca3af;font-size:0.85rem;">QR Code não disponível</span>';
          }

          successModal.classList.add('show');
          startPolling(data.transactionId);
        } else {
          throw new Error('Falha na criação da transação PIX');
        }

        console.log('Transaction successful:', { identifier, response: data });

      } catch (error) {
        console.error('Checkout error:', error);
        errorMessage.textContent = error.message || 'Ocorreu um erro ao processar sua compra. Por favor, tente novamente.';
        errorModal.classList.add('show');
      } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalText;
      }
    }

    form.addEventListener('submit', submitCheckout);

    // ============================================
    // PIX COPY FUNCTION
    // ============================================

    function copyPixCode() {
      const pixCode = document.getElementById('pixCode');
      const text = pixCode.textContent;
      
      navigator.clipboard.writeText(text).then(() => {
        alert('Código PIX copiado com sucesso!');
      }).catch(() => {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Código PIX copiado com sucesso!');
      });
    }

    // ============================================
    // MODAL HANDLERS
    // ============================================

    // ============================================
    // POLLING DE STATUS DO PAGAMENTO
    // ============================================

    let pollingInterval = null;

    function startPolling(transactionId) {
      if (!transactionId) return;

      // Verifica a cada 5 segundos
      pollingInterval = setInterval(async () => {
        try {
          const res = await fetch('https://nwh-2.corusai.com/webhook/status', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ transactionId })
          });
          if (!res.ok) return;

          const rawStatus = await res.json();
          const statusData = Array.isArray(rawStatus) ? rawStatus[0] : rawStatus;
          const status = statusData.status || statusData.paymentStatus || '';

          if (status === 'PAID' || status === 'OK' || status === 'APPROVED' || status === 'paid') {
            clearInterval(pollingInterval);
            window.location.href = `obrigado-panelas.html?order_id=${transactionId}`;
          }
        } catch (err) {
          // Silencioso — continua tentando
          console.log('Polling error:', err);
        }
      }, 5000);
    }

    function setModalPaid() {
      // Banner
      const banner = document.getElementById('modalBanner');
      banner.classList.remove('pending');
      banner.classList.add('paid');

      // Ícone
      const iconWrap = document.getElementById('modalIconWrap');
      iconWrap.classList.remove('pending');
      iconWrap.classList.add('paid');
      document.getElementById('modalIcon').className = 'fas fa-check';

      // Títulos
      document.getElementById('modalTitle').textContent = 'Pagamento confirmado! 🎉';
      document.getElementById('modalSubtitle').textContent = 'Seu pedido está sendo processado';

      // Badge
      const badge = document.getElementById('statusBadge');
      badge.classList.remove('pending');
      badge.classList.add('paid');
      document.getElementById('statusSpin').style.display = 'none';
      document.getElementById('statusText').textContent = '✅ Pagamento confirmado';

      // Mensagem
      document.getElementById('modalMessage').textContent = 'Recebemos seu pagamento! Em breve você receberá um e-mail com todos os detalhes do pedido.';

      // Esconde a seção PIX (não precisa mais)
      document.getElementById('pixSection').style.display = 'none';

      // Esconde botão "Já paguei"
      document.getElementById('alreadyPaidBtn').style.display = 'none';
    }

    // ============================================
    // MODAL HANDLERS
    // ============================================

    document.getElementById('closeSuccessBtn').addEventListener('click', () => {
      clearInterval(pollingInterval);
      successModal.classList.remove('show');
      form.reset();
      // Reset modal para estado inicial
      setTimeout(() => {
        document.getElementById('modalBanner').className = 'modal-banner pending';
        document.getElementById('modalIconWrap').className = 'modal-icon-wrap pending';
        document.getElementById('modalIcon').className = 'fas fa-clock';
        document.getElementById('modalTitle').textContent = 'Pedido gerado com sucesso!';
        document.getElementById('modalSubtitle').textContent = 'Aguardando confirmação do pagamento';
        document.getElementById('statusBadge').className = 'status-badge pending';
        document.getElementById('statusSpin').style.display = '';
        document.getElementById('statusText').textContent = '⏳ Aguardando pagamento';
        document.getElementById('modalMessage').textContent = 'Aguardando pagamento via PIX. Assim que o pagamento for confirmado, você receberá um e-mail com os detalhes.';
        document.getElementById('pixSection').style.display = '';
        document.getElementById('alreadyPaidBtn').style.display = '';
        document.getElementById('pixQR').innerHTML = '<span style="color:#9ca3af; font-size:0.85rem;">Carregando QR Code...</span>';
        document.getElementById('pixCode').textContent = '';
      }, 400);
    });

    document.getElementById('alreadyPaidBtn').addEventListener('click', () => {
      clearInterval(pollingInterval);
      setModalPaid();
    });

    document.getElementById('closeErrorBtn').addEventListener('click', () => {
      errorModal.classList.remove('show');
    });

    [successModal, errorModal].forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('show');
        }
      });
    });
  </script>
</body>
</html>
